{
  "pluginAlias": "TeslaPowerwall",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "A Homebridge plugin for Tesla Powerwall that provides battery status, power flow, and grid connectivity monitoring in HomeKit.",
  "footerDisplay": "For help and support visit the [plugin repository](https://github.com/nmuldoon/homebridge-tesla-powerwall).",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Name",
        "type": "string",
        "default": "Tesla Powerwall",
        "required": true,
        "description": "The name that will appear in HomeKit for your Tesla Powerwall"
      },
      "ip": {
        "title": "IP Address",
        "type": "string",
        "default": "192.168.1.100",
        "required": true,
        "format": "ipv4",
        "description": "The IP address of your Tesla Powerwall on your local network"
      },
      "port": {
        "title": "Port",
        "type": "string",
        "default": "443",
        "required": false,
        "description": "Port number (leave as 443 unless you've changed it)"
      },
      "password": {
        "title": "Password",
        "type": "string",
        "required": true,
        "description": "Your Tesla Powerwall password (set via the Tesla app)"
      },
      "pollingInterval": {
        "title": "Polling Interval (seconds)",
        "type": "integer",
        "default": 15,
        "minimum": 5,
        "maximum": 300,
        "required": false,
        "description": "How often to poll the Powerwall for updates (5-300 seconds)"
      },
      "enableGridStatus": {
        "title": "Enable Grid Status",
        "type": "boolean",
        "default": true,
        "required": false,
        "description": "Show grid connectivity status as a Contact Sensor"
      },
      "enableGridPowerSensors": {
        "title": "Enable Grid Power Sensors",
        "type": "boolean",
        "default": true,
        "required": false,
        "description": "Show sensors that detect when power is feeding to or pulling from the grid (for automation triggers)"
      },
      "gridSensorThreshold": {
        "title": "Grid Sensor Threshold (watts)",
        "type": "integer",
        "default": 50,
        "minimum": 0,
        "maximum": 1000,
        "required": false,
        "description": "Power threshold in watts for grid sensor activation (helps avoid false triggers from noise)"
      },
      "enablePowerMeters": {
        "title": "Enable Power Meters",
        "type": "boolean",
        "default": true,
        "required": false,
        "description": "Show power flow meters (Solar, Grid, Load) as Light Bulbs with brightness representing power"
      },
      "enableHistory": {
        "title": "Enable History",
        "type": "boolean",
        "default": false,
        "required": false,
        "description": "Enable historical data logging (requires eve app to view)"
      },
      "debug": {
        "title": "Debug Logging",
        "type": "boolean",
        "default": false,
        "required": false,
        "description": "Enable detailed debug logging for troubleshooting"
      }
    }
  },
  "layout": [
    {
      "type": "fieldset",
      "title": "Connection Settings",
      "expandable": false,
      "items": [
        "name",
        "ip",
        "port",
        "password"
      ]
    },
    {
      "type": "fieldset",
      "title": "Monitoring Settings",
      "expandable": true,
      "items": [
        "pollingInterval",
        "enableGridStatus",
        "enableGridPowerSensors",
        "gridSensorThreshold",
        "enablePowerMeters",
        "enableHistory"
      ]
    },
    {
      "type": "fieldset",
      "title": "Troubleshooting",
      "expandable": true,
      "items": [
        "debug"
      ]
    }
  ]
}
